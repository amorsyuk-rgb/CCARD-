<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Settings â€” GraceWise</title><link rel="stylesheet" href="/theme.css"><script src="/core.js"></script></head><body><div class="header"><div style="display:flex;gap:12px;align-items:center"><div class="logo">GW</div><div><div style="font-weight:700;font-size:18px">GraceWise</div><div class="small">Settings</div></div></div></div><div class="container"><div class="panel"><h3>Settings</h3><div class="small">Backup, restore, theme, and export.</div><label>Theme<select id="themeSelect"><option value="light">Light</option><option value="dark">Dark</option></select></label><div style="margin-top:10px;display:flex;gap:8px"><button id="syncBtn">Backup to Cloud</button><button id="restoreBtn">Restore from Cloud</button><button id="downloadBtn">Download Data File</button></div><div style="margin-top:10px"><button id="logoutBtn">Logout</button></div><div id="syncStatus" class="small" style="margin-top:10px"></div></div></div><div class="bottom-nav"><div class="nav-item" data-path="/cards" onclick="location.href='/cards'">Cards</div><div class="nav-item" data-path="/transactions" onclick="location.href='/transactions'">Transactions</div><div class="nav-item" data-path="/grace" onclick="location.href='/grace'">Grace</div><div class="nav-item active" data-path="/settings" onclick="location.href='/settings'">Settings</div></div><script>applyTheme(); setActiveNav('/settings'); const sel = document.getElementById('themeSelect'); sel.value = localStorage.getItem(THEME_KEY()) || 'light'; sel.addEventListener('change', e=>{ localStorage.setItem(THEME_KEY(), e.target.value); applyTheme(); }); document.getElementById('syncBtn').addEventListener('click', async ()=>{ document.getElementById('syncStatus').textContent = 'Syncing...'; const r = await syncToServer(); document.getElementById('syncStatus').textContent = r && r.ok? 'Backup saved' : 'Backup failed'; }); document.getElementById('restoreBtn').addEventListener('click', async ()=>{ document.getElementById('syncStatus').textContent = 'Restoring...'; const r = await restoreFromServer(); document.getElementById('syncStatus').textContent = r && r.ok? 'Restored' : 'Restore failed'; if(r && r.ok) location.reload(); }); document.getElementById('downloadBtn').addEventListener('click', ()=>{ downloadDataFile(); }); document.getElementById('logoutBtn').addEventListener('click', ()=>{ clearToken(); alert('Logged out'); location.href='/login'; });</script></html>