<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Cards — GraceWise</title><link rel="stylesheet" href="/theme.css"><script src="/core.js"></script></head><body><div class="header"><div class="logo">GW</div><div style="font-weight:700">GraceWise</div><div style="display:flex;gap:8px"><button onclick="theme=theme==='cib'?'dark':'cib';applyTheme();">Toggle</button><button onclick="exportData()">Export</button></div></div><div class="container"><div class="panel"><h3>Cards / Banks</h3><div class="small">Add bank/card — include daily overdue rate (%) and late fine (EGP).</div><label>Card name<input id="bankName"></label><label>Cycle End (date)<input id="bankEnd" type="date"></label><label>Payment Due (date)<input id="bankDue" type="date"></label><label>Annual Rate (%)<input id="bankRate" type="number" step="0.01"></label><label>Daily Overdue Rate (%)<input id="bankDaily" type="number" step="0.0001"></label><label>Late Fine (EGP)<input id="bankFine" type="number" step="0.01"></label><div style="display:flex;gap:8px;margin-top:8px"><button id="saveBtn">Save</button><button id="newBtn">New</button></div></div><div id="banksPanel" class="panel"><h4>Saved Cards</h4><div id="banksList" class="small"></div></div></div><div class="bottom-nav"><div class="nav-item active" data-path="/cards" onclick="location.href='/cards'">Cards</div><div class="nav-item" data-path="/transactions" onclick="location.href='/transactions'">Tx</div><div class="nav-item" data-path="/grace" onclick="location.href='/grace'">Grace</div><div class="nav-item" data-path="/settings" onclick="location.href='/settings'">Settings</div></div><script>applyTheme(); setActiveNav('/cards'); function renderBanks(){ const banks=load(BANKS_KEY); const el=document.getElementById('banksList'); el.innerHTML=''; if(!banks.length){ el.innerHTML='<div class="small">No cards yet.</div>'; return; } banks.forEach(b=>{ const d=document.createElement('div'); d.className='bank-item'; d.innerHTML=`<div><strong>${b.name}</strong><div class="small">Due ${new Date(b.due).toLocaleDateString()} • Daily ${b.daily}% • Fine ${b.fine}</div></div><div style="display:flex;flex-direction:column;gap:6px"><button onclick="openBank('${b.id}')">Open</button><button onclick="deleteBank('${b.id}')">Delete</button></div>`; el.appendChild(d); }); } function openBank(id){ const banks=load(BANKS_KEY); const b=banks.find(x=>x.id===id); if(!b) return; document.getElementById('bankName').value=b.name; document.getElementById('bankEnd').value=b.end; document.getElementById('bankDue').value=b.due; document.getElementById('bankRate').value=b.rate; document.getElementById('bankDaily').value=b.daily; document.getElementById('bankFine').value=b.fine; } function deleteBank(id){ if(!confirm('Delete card?')) return; const banks=load(BANKS_KEY).filter(b=>b.id!==id); save(BANKS_KEY,banks); renderBanks(); } document.getElementById('saveBtn').addEventListener('click',()=>{ const name=document.getElementById('bankName').value.trim(); const end=document.getElementById('bankEnd').value; const due=document.getElementById('bankDue').value; const rate=parseFloat(document.getElementById('bankRate').value)||0; const daily=parseFloat(document.getElementById('bankDaily').value)||0; const fine=parseFloat(document.getElementById('bankFine').value)||0; if(!name||!end||!due){ alert('Please fill name, end and due'); return; } const banks=load(BANKS_KEY); const existing=banks.find(x=>x.name.toLowerCase()===name.toLowerCase()); if(existing){ existing.end=end; existing.due=due; existing.rate=rate; existing.daily=daily; existing.fine=fine; } else { banks.push({id:uid(),name,end,due,rate,daily,fine}); } save(BANKS_KEY,banks); renderBanks(); alert('Saved'); }); document.getElementById('newBtn').addEventListener('click',()=>{ document.getElementById('bankName').value=''; document.getElementById('bankEnd').value=''; document.getElementById('bankDue').value=''; document.getElementById('bankRate').value=''; document.getElementById('bankDaily').value=''; document.getElementById('bankFine').value=''; }); document.addEventListener('DOMContentLoaded',()=>{ renderBanks(); });</script></body></html>